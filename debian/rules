#!/usr/bin/make -f

DPKG_EXPORT_BUILDFLAGS = 1

export DEB_BUILD_MAINT_OPTIONS = hardening=+all
export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed

dtmp = debian/universal-ctags

%:
	dh $@

override_dh_autoreconf:
	dh_autoreconf ./autogen.sh

override_dh_auto_configure:
	dh_auto_configure -- \
		--program-transform-name='s/ctags/ctags-universal/; s/etags/etags-universal/'\
		# --with-ctags-datadir=/etc/ctags/
		# --with-ctags-libexecdir=/usr/lib/
		--enable-readlib \
		--enable-etags \
                --enable-iconv

override_dh_installdocs:
	$(MAKE) --directory=docs html
	$(MAKE) --directory=docs latexpdf
	mv docs/_build/latex/UniversalCtags.pdf docs/universal-ctags.pdf
	dh_installdocs

override_dh_install:
	dh_install
